---
import { CollectionEntry } from 'astro:content';
import trophy from '@assets/images/trophy.webp';
import Picture from 'astro/components/Picture.astro';
import { ProjectHighlightsMarquee } from '@components/profile/ProjectHighlights';

export interface MilestoneProps {
  milestone: CollectionEntry<'projects'>['data']['milestones'][number];
  index: number;
  color: string;
}

const { milestone, index } = (Astro.props as MilestoneProps);
---

{ index === 0 && <div class="milestone-card relative flex flex-col justify-start items-start gap-2 w-[375px] h-[285px] bg-neutral-200 dark:bg-neutral-900 shadow-xl rounded-xl overflow-hidden">
  <h5 class="text-base-500 text-xl font-prompt p-4"><span class="text-base-600"></span>{milestone.title}</h5>
  <div class="flex flex-col justify-start items-start ml-[1px] w-full overflow-hidden">
    <ProjectHighlightsMarquee highlights={milestone.strongPoints ?? []} containerWidth={375}/>
  </div>
  <Picture
    src={trophy}
    formats={['webp']}
    loading="lazy"
    width={250} 
    height={250}
    alt="Sergio Rodriguez Gundin profile"
    class="absolute -bottom-10 -right-20 z-0 drop-shadow-lg opacity-10 grayscale"
  />
</div> }

{ index !== 0 && <div class="relative flex flex-col justify-start items-start gap-2 w-[135px] h-[135px] bg-neutral-200 dark:bg-neutral-900 p-4 shadow-xl rounded-xl">
  <h5 class="text-base-500 text-base font-prompt"><span class="text-base-600"></span>{milestone.title}</h5>
  </div>
}

<style>
  .milestone-card::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    border: 1px solid transparent;
    background: linear-gradient(135deg, hsl(var(--primary)) -35%, hsl(var(--background)) 75%, transparent 100%) border-box;
    mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
  }
</style>