---
import Celonis from '@components/icons/Celonis.astro';
import LaLiga from '@components/icons/LaLiga.astro';
import Dixper from '@components/icons/Dixper.astro';
import Bankinter from '@components/icons/Bankinter.astro';
import { type CollectionEntry } from 'astro:content';
import Dreamfit from '@components/icons/Dreamfit.astro';
import { DREAMFIT, LALIGA, DIXPER, BANKINTER, CELONIS } from '@models/projects.model';

interface MarkerProps {
  sortedProjects: CollectionEntry<'projects'>[];
}

const { sortedProjects }: MarkerProps = Astro.props as MarkerProps;

const iconMap = {
  [CELONIS]: Celonis,
  [LALIGA]: LaLiga,
  [DIXPER]: Dixper,
  [BANKINTER]: Bankinter,
  [DREAMFIT]: Dreamfit
};
---

<ul class="markers">
  {
    sortedProjects.map((project, index) => {
      const IconComponent = iconMap[project.data.id as keyof typeof iconMap];
      return (
        <li>
          <a href={`#carousel_${index}`}>
            {IconComponent && <IconComponent />}
          </a>
        </li>
      )
    })
  }
</ul>

<style>
  .markers {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    padding: var(--space-6) 0;
    width: 120px;
    a {
      animation-timeline: --carousel;
      animation-range: calc((var(--i) - 1) * 20%) calc(var(--i) * 20% + 1px);
    }
    li {
      &:nth-child(1) { --i: 1; }
      &:nth-child(2) { --i: 2; }
      &:nth-child(3) { --i: 3; }
      &:nth-child(4) { --i: 4; }
      &:nth-child(5) { --i: 5; }
    }
  }
</style>